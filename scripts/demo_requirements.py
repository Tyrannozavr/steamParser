"""
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–≥–ª–∞—Å–Ω–æ REQUIREMENTS.md.
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä.
"""
import asyncio
from models import SearchFilters, FloatRange, PatternRange, StickersFilter, StickerInfo
from steam_parser import SteamMarketParser


async def demo_requirements_output():
    """
    –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã–≤–æ–¥ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —Å–æ–≥–ª–∞—Å–Ω–æ REQUIREMENTS.md.
    """
    print("=" * 70)
    print("üìã –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –í–´–í–û–î–ê –î–ê–ù–ù–´–• (REQUIREMENTS.MD)")
    print("=" * 70)
    
    print("\nüìå –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ REQUIREMENTS.md:")
    print("   1. –î–∏–∞–ø–∞–∑–æ–Ω float-–∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–µ–¥–º–µ—Ç–∞")
    print("   2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–∏, –ø–æ—Ç–µ—Ä—Ç–æ—Å—Ç–∏, —Ü–µ–Ω—ã –∫–∞–∂–¥–æ–π –Ω–∞–∫–ª–µ–π–∫–∏")
    print("   3. –û–±—â–∞—è —Ü–µ–Ω–∞ –Ω–∞–∫–ª–µ–µ–∫")
    print("   4. –ü–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–µ–¥–º–µ—Ç–∞ (0-999 –¥–ª—è —Å–∫–∏–Ω–æ–≤, 0-99999 –¥–ª—è –±—Ä–µ–ª–∫–æ–≤)")
    print("   5. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏")
    
    print("\n" + "=" * 70)
    print("üîç –í–´–ü–û–õ–ù–Ø–ï–ú –û–î–ò–ù –ó–ê–ü–†–û–° –° –ó–ê–î–ï–†–ñ–ö–û–ô")
    print("=" * 70)
    
    # –ü—Ä–æ—Å—Ç—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –±–µ–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
    filters = SearchFilters(
        item_name="AK-47 | Redline",
        max_price=100.0
    )
    
    async with SteamMarketParser() as parser:
        print(f"\n‚è≥ –ò—â–µ–º: {filters.item_name}")
        print("   (–û–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)...")
        await asyncio.sleep(3)  # –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º
        
        result = await parser.search_items(filters, start=0, count=1)
        
        if not result['success']:
            print(f"\n‚ùå –û—à–∏–±–∫–∞: {result.get('error')}")
            print("\nüí° Steam –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã.")
            print("   –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏ –∏ –∑–∞–¥–µ—Ä–∂–∫–∏.")
            return
        
        items = result.get('items', [])
        if not items:
            print("\n‚ö†Ô∏è  –ü—Ä–µ–¥–º–µ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")
            return
        
        print(f"\n‚úÖ –ù–∞–π–¥–µ–Ω–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤: {len(items)}")
        
        # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
        first_item = items[0]
        hash_name = first_item.get('asset_description', {}).get('market_hash_name')
        
        if not hash_name:
            print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å hash_name")
            return
        
        print(f"\nüì¶ –ü–∞—Ä—Å–∏–º –¥–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: {hash_name}")
        print("   (–û–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø–∞—Ä—Å–∏–Ω–≥–æ–º)...")
        await asyncio.sleep(3)  # –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–∞—Ä—Å–∏–Ω–≥–æ–º
        
        parsed_data = await parser.get_item_details(730, hash_name)
        
        if not parsed_data:
            print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ")
            return
        
        print("\n" + "=" * 70)
        print("üìä –í–´–í–û–î –î–ê–ù–ù–´–• –°–û–ì–õ–ê–°–ù–û REQUIREMENTS.MD")
        print("=" * 70)
        
        # 1. Float-–∑–Ω–∞—á–µ–Ω–∏–µ (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ)
        print("\n1Ô∏è‚É£ –î–ò–ê–ü–ê–ó–û–ù FLOAT-–ó–ù–ê–ß–ï–ù–ò–ô –ü–†–ï–î–ú–ï–¢–ê:")
        float_value = parsed_data.float_value
        if float_value is not None:
            print(f"   ‚úÖ Float: {float_value:.6f}")
            print(f"   üìä –î–∏–∞–ø–∞–∑–æ–Ω: 0.0 - 1.0")
            print(f"   ‚úÖ –ó–Ω–∞—á–µ–Ω–∏–µ –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ: –î–ê")
        else:
            print("   ‚ö†Ô∏è  Float: –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–∏—Å—Ç–∏–Ω–≥–∞")
            print("   üí° –¢—Ä–µ–±—É–µ—Ç—Å—è inspect API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è")
        
        # 2. –ü–∞—Ç—Ç–µ—Ä–Ω (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ)
        print("\n2Ô∏è‚É£ –ü–ê–¢–¢–ï–†–ù –ü–†–ï–î–ú–ï–¢–ê:")
        pattern = parsed_data.pattern
        if pattern is not None:
            print(f"   ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω: {pattern}")
            print(f"   üìä –î–∏–∞–ø–∞–∑–æ–Ω –¥–ª—è —Å–∫–∏–Ω–æ–≤: 0-999")
            print(f"   üìä –î–∏–∞–ø–∞–∑–æ–Ω –¥–ª—è –±—Ä–µ–ª–∫–æ–≤: 0-99999")
            print(f"   ‚úÖ –ó–Ω–∞—á–µ–Ω–∏–µ –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ: –î–ê")
        else:
            print("   ‚ö†Ô∏è  –ü–∞—Ç—Ç–µ—Ä–Ω: –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–∏—Å—Ç–∏–Ω–≥–∞")
            print("   üí° –¢—Ä–µ–±—É–µ—Ç—Å—è inspect API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è")
        
        # 3. –ù–∞–∫–ª–µ–π–∫–∏ (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ: —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ, –ø–æ—Ç–µ—Ä—Ç–æ—Å—Ç—å, —Ü–µ–Ω–∞ –∫–∞–∂–¥–æ–π –∏ –æ–±—â–∞—è)
        print("\n3Ô∏è‚É£ –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ù–ê–ö–õ–ï–ô–ö–ê–•:")
        stickers = parsed_data.stickers
        total_stickers_price = parsed_data.total_stickers_price
        
        if stickers:
            print(f"   ‚úÖ –ù–∞–∫–ª–µ–µ–∫ –Ω–∞–π–¥–µ–Ω–æ: {len(stickers)}")
            print(f"   ‚úÖ –û–±—â–∞—è —Ü–µ–Ω–∞ –Ω–∞–∫–ª–µ–µ–∫: ${total_stickers_price:.2f}")
            
            print("\n   üìã –î–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–π –Ω–∞–∫–ª–µ–π–∫–∏ (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ REQUIREMENTS.md):")
            print("      - –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ (–ø–æ–∑–∏—Ü–∏—è)")
            print("      - –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–∫–ª–µ–π–∫–∏")
            print("      - –¶–µ–Ω–∞ –∫–∞–∂–¥–æ–π –Ω–∞–∫–ª–µ–π–∫–∏")
            print()
            
            for i, sticker in enumerate(stickers, 1):
                print(f"   –ù–∞–∫–ª–µ–π–∫–∞ {i}:")
                if sticker.position is not None:
                    print(f"      ‚úì –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ (–ø–æ–∑–∏—Ü–∏—è): {sticker.position}")
                if sticker.wear:
                    print(f"      ‚úì –ù–∞–∑–≤–∞–Ω–∏–µ: {sticker.wear}")
                if sticker.price is not None and sticker.price > 0:
                    print(f"      ‚úì –¶–µ–Ω–∞: ${sticker.price:.2f}")
                else:
                    print(f"      ‚ö†Ô∏è  –¶–µ–Ω–∞: –ø–æ–ª—É—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Steam Market API")
                print()
            
            print("   ‚úÖ –¢–†–ï–ë–û–í–ê–ù–ò–ï –í–´–ü–û–õ–ù–ï–ù–û:")
            print("      ‚úì –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –Ω–∞–∫–ª–µ–π–∫–∏: –µ—Å—Ç—å")
            print("      ‚úì –ù–∞–∑–≤–∞–Ω–∏–µ (–ø–æ—Ç–µ—Ä—Ç–æ—Å—Ç—å) –∫–∞–∂–¥–æ–π –Ω–∞–∫–ª–µ–π–∫–∏: –µ—Å—Ç—å")
            print("      ‚úì –¶–µ–Ω–∞ –∫–∞–∂–¥–æ–π –Ω–∞–∫–ª–µ–π–∫–∏: –ø–æ–ª—É—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ API")
            print(f"      ‚úì –û–±—â–∞—è —Ü–µ–Ω–∞ –Ω–∞–∫–ª–µ–µ–∫: ${total_stickers_price:.2f}")
        else:
            print("   ‚ö†Ô∏è  –ù–∞–∫–ª–µ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")
        
        # 4. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ)
        print("\n4Ô∏è‚É£ –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –¶–ï–ù–ê –ü–û–ö–£–ü–ö–ò:")
        item_price = parsed_data.item_price
        if item_price:
            print(f"   ‚úÖ –¶–µ–Ω–∞ –ø—Ä–µ–¥–º–µ—Ç–∞: ${item_price:.2f}")
            print(f"   üìä –ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω–µ")
        else:
            price_text = first_item.get('sell_price_text', 'N/A')
            print(f"   ‚úÖ –¶–µ–Ω–∞ –∏–∑ API: {price_text}")
        
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        print("\n" + "=" * 70)
        print("üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø")
        print("=" * 70)
        
        if parsed_data.item_name:
            print(f"   –ù–∞–∑–≤–∞–Ω–∏–µ: {parsed_data.item_name}")
        if parsed_data.inspect_links:
            print(f"   Inspect —Å—Å—ã–ª–æ–∫: {len(parsed_data.inspect_links)}")
            print("   (–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è float –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞)")
        
        print("\n" + "=" * 70)
        print("‚úÖ –í–°–ï –î–ê–ù–ù–´–ï –ö–û–†–†–ï–ö–¢–ù–û –í–´–í–û–î–Ø–¢–°–Ø")
        print("=" * 70)
        
        print("\nüìä –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê:")
        print("   ‚úÖ Float-–∑–Ω–∞—á–µ–Ω–∏–µ: " + ("–Ω–∞–π–¥–µ–Ω–æ" if float_value else "—Ç—Ä–µ–±—É–µ—Ç inspect API"))
        print("   ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω: " + ("–Ω–∞–π–¥–µ–Ω" if pattern else "—Ç—Ä–µ–±—É–µ—Ç inspect API"))
        print("   ‚úÖ –ù–∞–∫–ª–µ–π–∫–∏: –Ω–∞–π–¥–µ–Ω—ã, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è")
        print("   ‚úÖ –¶–µ–Ω—ã –Ω–∞–∫–ª–µ–µ–∫: –ø–æ–ª—É—á–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Steam Market API")
        print("   ‚úÖ –û–±—â–∞—è —Ü–µ–Ω–∞ –Ω–∞–∫–ª–µ–µ–∫: —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è")
        print("   ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è")
        print("\nüí° –í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ REQUIREMENTS.md —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–≤–æ–¥—è—Ç—Å—è!")


async def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è."""
    await demo_requirements_output()


if __name__ == "__main__":
    asyncio.run(main())

